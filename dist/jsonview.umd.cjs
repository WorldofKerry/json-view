(function(s,l){typeof exports=="object"&&typeof module<"u"?l(exports):typeof define=="function"&&define.amd?define(["exports"],l):(s=typeof globalThis<"u"?globalThis:s||self,l(s.jsonview={}))})(this,(function(s){"use strict";function l(e){return Array.isArray(e)?"array":e===null?"null":typeof e}function d(e){return document.createElement(e)}function I(e,n,t){return e.addEventListener(n,t),()=>e.removeEventListener(n,t)}function O(e){e.parentNode.removeChild(e)}const r={HIDDEN:"hidden",CARET_ICON:"caret-icon",CARET_RIGHT:"fa-caret-right",CARET_DOWN:"fa-caret-down",ICON:"fas"};function k(e={}){const{key:n,size:t}=e;return`
    <div class="line">
      <div class="caret-icon"><i class="fas fa-caret-right"></i></div>
      <div class="json-key">${n}</div>
      <div class="json-size">${t}</div>
    </div>
  `}function R(e={}){const{key:n,value:t,type:i}=e;return`
    <div class="line">
      <div class="empty-icon"></div>
      <div class="json-key">${n}</div>
      <div class="json-separator">:</div>
      <div class="json-value json-${i}">${t}</div>
    </div>
  `}function H(){const e=d("div");return e.className="json-container",e}function p(e){e.children.forEach(n=>{n.el.classList.add(r.HIDDEN),n.isExpanded&&p(n)})}function y(e){e.children.forEach(n=>{n.el.classList.remove(r.HIDDEN),n.isExpanded&&y(n)})}function v(e){if(e.children.length>0){const n=e.el.querySelector("."+r.ICON);n&&n.classList.replace(r.CARET_RIGHT,r.CARET_DOWN)}}function h(e){if(e.children.length>0){const n=e.el.querySelector("."+r.ICON);n&&n.classList.replace(r.CARET_DOWN,r.CARET_RIGHT)}}function u(e){e.isExpanded?(e.isExpanded=!1,h(e),p(e)):(e.isExpanded=!0,v(e),y(e))}function L(e){let n=d("div");const t=a=>{const m=a.children.length;return a.type==="array"?`[${m}]`:a.type==="object"?`{${m}}`:null};if(e.children.length>0){n.innerHTML=k({key:e.key,size:t(e)});const a=n.querySelector("."+r.CARET_ICON);e.dispose=I(a,"click",()=>u(e))}else n.innerHTML=R({key:e.key,value:e.value===""?'""':e.value,type:e.value==="{}"?"object":typeof e.value});const i=n.children[0];return e.parent!==null&&i.classList.add(r.HIDDEN),i.style="margin-left: "+e.depth*18+"px;",i}function c(e,n){n(e),e.children.length>0&&e.children.forEach(t=>{c(t,n)})}function E(e={}){const n=i=>l(i)==="object"&&Object.keys(i).length===0;let t=e.hasOwnProperty("value")?e.value:null;return n(t)&&(t="{}"),{key:e.key||null,parent:e.parent||null,value:t,isExpanded:e.isExpanded||!1,type:e.type||null,children:e.children||[],el:e.el||null,depth:e.depth||0,dispose:null}}function N(e,n){if(typeof e=="object")for(let t in e){const i=E({value:e[t],key:t,depth:n.depth+1,type:l(e[t]),parent:n});n.children.push(i),N(e[t],i)}}function g(e){return typeof e=="string"?JSON.parse(e):e}function o(e){const n=g(e),t=E({value:n,key:l(n),type:l(n)});return N(n,t),t}function C(e,n){const t=g(e),i=o(t);return f(i,n),i}function f(e,n){const t=H();c(e,function(i){i.el=L(i),t.appendChild(i.el)}),n.appendChild(t)}function D(e){c(e,function(n){n.el.classList.remove(r.HIDDEN),n.isExpanded=!0,v(n)})}function T(e){c(e,function(n){n.isExpanded=!1,n.depth>e.depth&&n.el.classList.add(r.HIDDEN),h(n)})}function j(e){c(e,n=>{n.dispose&&n.dispose()}),O(e.el.parentNode)}const S={toggleNode:u,render:f,create:o,renderJSON:C,expand:D,collapse:T,traverse:c,destroy:j};s.collapse=T,s.create=o,s.default=S,s.destroy=j,s.expand=D,s.render=f,s.renderJSON=C,s.toggleNode=u,s.traverse=c,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
