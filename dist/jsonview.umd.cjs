(function(l,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(l=typeof globalThis<"u"?globalThis:l||self,c(l.jsonview={}))})(this,(function(l){"use strict";function c(e){return Array.isArray(e)?"array":e===null?"null":typeof e}function y(e){return document.createElement(e)}function R(e,n,t){return e.addEventListener(n,t),()=>e.removeEventListener(n,t)}function b(e){e.parentNode.removeChild(e)}const r={HIDDEN:"hidden",CARET_ICON:"caret-icon",CARET_RIGHT:"fa-caret-right",CARET_DOWN:"fa-caret-down",ICON:"fas",CONTAINER:"json-container"};function $(e={}){const{key:n,size:t,isExpanded:i=!1}=e;return`
    <div class="line">
      <div class="caret-icon"><i class="fas ${i?r.CARET_DOWN:r.CARET_RIGHT}"></i></div>
      <div class="json-key">${n}</div>
      <div class="json-size">${t}</div>
    </div>
  `}function k(e={}){const{key:n,value:t,type:i}=e;return`
    <div class="line">
      <div class="empty-icon"></div>
      <div class="json-key">${n}</div>
      <div class="json-separator">:</div>
      <div class="json-value ${i}">${t}</div>
    </div>
  `}function A(){const e=y("div");return e.className=r.CONTAINER,e}function E(e){e.children.forEach(n=>{n.el&&n.el.classList.add(r.HIDDEN),n.isExpanded&&E(n)})}function v(e){e.children.forEach(n=>{n.el&&n.el.classList.remove(r.HIDDEN),n.isExpanded&&v(n)})}function h(e){if(e.children.length>0&&e.el){const n=e.el.querySelector("."+r.ICON);n&&n.classList.replace(r.CARET_RIGHT,r.CARET_DOWN)}}function N(e){if(e.children.length>0&&e.el){const n=e.el.querySelector("."+r.ICON);n&&n.classList.replace(r.CARET_DOWN,r.CARET_RIGHT)}}function f(e){e.isExpanded?(e.isExpanded=!1,N(e),E(e)):(e.isExpanded=!0,h(e),v(e))}function H(e){let n=y("div");const t=s=>{const O=s.children.length;return s.type==="array"?`[${O}]`:s.type==="object"?`{${O}}`:null},i=s=>{switch(s.type){case"string":return s.value?`${s.value}`:'""';case"number":case"boolean":case"null":return`${s.value}`;case"array":return`[${s.children.length}]`;case"object":return`{${s.children.length}}`;default:return`${s.value}`}},u=s=>{switch(s.type){case"string":case"number":case"boolean":case"null":case"array":case"object":return`json-${s.type}`;default:return`json-${typeof s.value}`}};if(e.children.length>0){n.innerHTML=$({key:e.key,size:t(e),isExpanded:e.isExpanded});const s=n.querySelector("."+r.CARET_ICON);e.dispose=R(s,"click",()=>f(e))}else n.innerHTML=k({key:e.key,value:i(e),type:u(e)});const o=n.children[0];return e.parent!==null&&(e.isExpanded?o.classList.remove(r.HIDDEN):o.classList.add(r.HIDDEN)),o.style="margin-left: "+e.depth*18+"px;",o}function a(e,n,t=1/0,i=0){n(e),i<t&&e.children.length>0&&e.children.forEach(u=>{a(u,n,t,i+1)})}function g(e={}){const n=i=>c(i)==="object"&&Object.keys(i).length===0;let t=e.hasOwnProperty("value")?e.value:null;return n(t)&&(t="{}"),{key:e.key||null,parent:e.parent||null,value:t,isExpanded:e.isExpanded||!1,type:e.type||null,children:e.children||[],el:e.el||null,depth:e.depth||0,dispose:null}}function C(e,n){if(typeof e=="object")for(let t in e){const i=g({value:e[t],key:t,depth:n.depth+1,type:c(e[t]),parent:n});n.children.push(i),C(e[t],i)}}function I(e){return typeof e=="string"?JSON.parse(e):e}function d(e){const n=I(e),t=g({value:n,key:c(n),type:c(n)});return C(n,t),t}function T(e,n){const t=I(e),i=d(t);return p(i,n),i}function p(e,n){const t=A();a(e,function(i){i.el=H(i),t.appendChild(i.el)}),n.appendChild(t)}function j(e,n=1/0){a(e,function(t){t.el&&t.el.classList.remove(r.HIDDEN),t.isExpanded=!0,h(t)},n)}function m(e,n=1/0){a(e,function(t){t.isExpanded=!1,t.depth>e.depth&&t.el&&t.el.classList.add(r.HIDDEN),N(t)},n)}function D(e){a(e,n=>{n.dispose&&n.dispose()}),b(e.el.parentNode)}const S={toggleNode:f,render:p,create:d,renderJSON:T,expand:j,collapse:m,traverse:a,destroy:D};l.collapse=m,l.create=d,l.default=S,l.destroy=D,l.expand=j,l.render=p,l.renderJSON=T,l.toggleNode=f,l.traverse=a,Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
