(function(l,a){typeof exports=="object"&&typeof module<"u"?a(exports):typeof define=="function"&&define.amd?define(["exports"],a):(l=typeof globalThis<"u"?globalThis:l||self,a(l.jsonview={}))})(this,(function(l){"use strict";function a(e){return document.createElement(e)}function R(e,n,t){return e.addEventListener(n,t),()=>e.removeEventListener(n,t)}function b(e){e.parentNode.removeChild(e)}function u(e){return Array.isArray(e)?"array":e===null?"null":typeof e}const r={HIDDEN:"hidden",CARET_ICON:"caret-icon",CARET_RIGHT:"fa-caret-right",CARET_DOWN:"fa-caret-down",ICON:"fas",CONTAINER:"json-container"};function $(e={}){const{key:n,size:t,isExpanded:s=!1}=e;return`
    <div class="line">
      <div class="caret-icon"><i class="fas ${s?r.CARET_DOWN:r.CARET_RIGHT}"></i></div>
      <div class="json-key">${n}</div>
      <div class="json-size">${t}</div>
    </div>
  `}function k(e={}){const{key:n,value:t,type:s}=e;return`
    <div class="line">
      <div class="empty-icon"></div>
      <div class="json-key">${n}</div>
      <div class="json-separator">:</div>
      <div class="json-value ${s}">${t}</div>
    </div>
  `}function A(){const e=a("div");return e.className=r.CONTAINER,e}function y(e){e.children.forEach(n=>{n.el&&n.el.classList.add(r.HIDDEN),n.isExpanded&&y(n)})}function E(e){e.children.forEach(n=>{n.el&&n.el.classList.remove(r.HIDDEN),n.isExpanded&&E(n)})}function v(e){if(e.children.length>0&&e.el){const n=e.el.querySelector("."+r.ICON);n&&n.classList.replace(r.CARET_RIGHT,r.CARET_DOWN)}}function N(e){if(e.children.length>0&&e.el){const n=e.el.querySelector("."+r.ICON);n&&n.classList.replace(r.CARET_DOWN,r.CARET_RIGHT)}}function f(e){e.isExpanded?(e.isExpanded=!1,N(e),y(e)):(e.isExpanded=!0,v(e),E(e))}function H(e){let n=a("div");const t=i=>{const O=i.children.length;return i.type==="array"?`[${O}]`:i.type==="object"?`{${O}}`:null},s=i=>{switch(i.type){case"string":return i.value?`${i.value}`:'""';case"number":case"boolean":case"null":return`${i.value}`;case"array":return`[${i.children.length}]`;case"object":return`{${i.children.length}}`;default:return`${i.value}`}},m=i=>{switch(i.type){case"string":case"number":case"boolean":case"null":case"array":case"object":return`json-${i.type}`;default:return`json-${typeof i.value}`}};if(e.children.length>0){n.innerHTML=$({key:e.key,size:t(e),isExpanded:e.isExpanded});const i=n.querySelector("."+r.CARET_ICON);e.dispose=R(i,"click",()=>f(e))}else n.innerHTML=k({key:e.key,value:s(e),type:m(e)});const o=n.children[0];return e.parent!==null&&(e.isExpanded?o.classList.remove(r.HIDDEN):o.classList.add(r.HIDDEN)),o.style="margin-left: "+e.depth*18+"px;",o}function c(e,n,t=0){n(e,t),e.children.forEach(s=>{c(s,n,t+1)})}function h(e={}){const n=s=>u(s)==="object"&&Object.keys(s).length===0;let t=e.hasOwnProperty("value")?e.value:null;return n(t)&&(t="{}"),{key:e.key||null,parent:e.parent||null,value:t,isExpanded:e.isExpanded||!1,type:e.type||null,children:e.children||[],el:e.el||null,depth:e.depth||0,dispose:null}}function g(e,n){if(typeof e=="object")for(let t in e){const s=h({value:e[t],key:t,depth:n.depth+1,type:u(e[t]),parent:n});n.children.push(s),g(e[t],s)}}function C(e){return typeof e=="string"?JSON.parse(e):e}function d(e){const n=C(e),t=h({value:n,key:u(n),type:u(n)});return g(n,t),t}function T(e,n){const t=C(e),s=d(t);return p(s,n),s}function p(e,n){const t=A();c(e,function(s){s.el=H(s),t.appendChild(s.el)}),n.appendChild(t)}function I(e,n=1/0){c(e,function(t,s){s<n&&(t.isExpanded=!0,v(t)),s<=n&&t.el&&t.el.classList.remove(r.HIDDEN)})}function D(e){c(e,function(n){n.isExpanded=!1,n.depth>e.depth&&n.el&&n.el.classList.add(r.HIDDEN),N(n)})}function j(e){c(e,n=>{n.dispose&&n.dispose()}),b(e.el.parentNode)}const S={toggleNode:f,render:p,create:d,renderJSON:T,expand:I,collapse:D,traverse:c,destroy:j};l.collapse=D,l.create=d,l.default=S,l.destroy=j,l.expand=I,l.render=p,l.renderJSON=T,l.toggleNode=f,l.traverse=c,Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
